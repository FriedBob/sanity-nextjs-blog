"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{33364:function(a,b,c){function d(a){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var e=function(a){if(a&&a.__esModule)return a;if(null===a||"object"!==d(a)&&"function"!=typeof a)return{default:a};var b=h();if(b&&b.has(a))return b.get(a);var c={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(c,f,g):c[f]=a[f]}return c.default=a,b&&b.set(a,c),c}(c(67294)),f=c(56281),g=c(99790);function h(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;return h=function(){return a},a}function i(){return(i=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a}).apply(this,arguments)}function j(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}function k(a,b){return(k=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function l(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function m(a){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function n(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var o="undefined"!=typeof navigator,p=o&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,q=o&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||p)&&!window.MSStream,r=/www\.dropbox\.com\/.+/,s=/https:\/\/watch\.cloudflarestream\.com\/([a-z0-9]+)/,t=function(a){!function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&k(a,b)}(u,a);var b,c,h,o,p,t=(b=u,c=function a(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(b){return!1}}(),function(){var a,e,f,g=m(b);if(c){var h=m(this).constructor;f=Reflect.construct(g,arguments,h)}else f=g.apply(this,arguments);return a=this,e=f,e&&("object"===d(e)||"function"==typeof e)?e:l(a)});function u(){var a;!function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")}(this,u);for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];return a=t.call.apply(t,[this].concat(c)),n(l(a),"onReady",function(){var b;return(b=a.props).onReady.apply(b,arguments)}),n(l(a),"onPlay",function(){var b;return(b=a.props).onPlay.apply(b,arguments)}),n(l(a),"onBuffer",function(){var b;return(b=a.props).onBuffer.apply(b,arguments)}),n(l(a),"onBufferEnd",function(){var b;return(b=a.props).onBufferEnd.apply(b,arguments)}),n(l(a),"onPause",function(){var b;return(b=a.props).onPause.apply(b,arguments)}),n(l(a),"onEnded",function(){var b;return(b=a.props).onEnded.apply(b,arguments)}),n(l(a),"onError",function(){var b;return(b=a.props).onError.apply(b,arguments)}),n(l(a),"onPlayBackRateChange",function(b){return a.props.onPlaybackRateChange(b.target.playbackRate)}),n(l(a),"onEnablePIP",function(){var b;return(b=a.props).onEnablePIP.apply(b,arguments)}),n(l(a),"onDisablePIP",function(b){var c=a.props,d=c.onDisablePIP,e=c.playing;d(b),e&&a.play()}),n(l(a),"onPresentationModeChange",function(b){if(a.player&&(0,f.supportsWebKitPresentationMode)(a.player)){var c=a.player.webkitPresentationMode;"picture-in-picture"===c?a.onEnablePIP(b):"inline"===c&&a.onDisablePIP(b)}}),n(l(a),"onSeek",function(b){a.props.onSeek(b.target.currentTime)}),n(l(a),"mute",function(){a.player.muted=!0}),n(l(a),"unmute",function(){a.player.muted=!1}),n(l(a),"renderSourceElement",function(a,b){return"string"==typeof a?e.default.createElement("source",{key:b,src:a}):e.default.createElement("source",i({key:b},a))}),n(l(a),"renderTrack",function(a,b){return e.default.createElement("track",i({key:b},a))}),n(l(a),"ref",function(b){a.player&&(a.prevPlayer=a.player),a.player=b}),a}return h=u,o=[{key:"componentDidMount",value:function(){this.props.onMount&&this.props.onMount(this),this.addListeners(this.player),q&&this.player.load()}},{key:"componentDidUpdate",value:function(a){this.shouldUseAudio(this.props)!==this.shouldUseAudio(a)&&(this.removeListeners(this.prevPlayer,a.url),this.addListeners(this.player)),this.props.url===a.url||(0,f.isMediaStream)(this.props.url)||(this.player.srcObject=null)}},{key:"componentWillUnmount",value:function(){this.removeListeners(this.player),this.hls&&this.hls.destroy()}},{key:"addListeners",value:function(a){var b=this.props,c=b.url,d=b.playsinline;a.addEventListener("play",this.onPlay),a.addEventListener("waiting",this.onBuffer),a.addEventListener("playing",this.onBufferEnd),a.addEventListener("pause",this.onPause),a.addEventListener("seeked",this.onSeek),a.addEventListener("ended",this.onEnded),a.addEventListener("error",this.onError),a.addEventListener("ratechange",this.onPlayBackRateChange),a.addEventListener("enterpictureinpicture",this.onEnablePIP),a.addEventListener("leavepictureinpicture",this.onDisablePIP),a.addEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(c)||a.addEventListener("canplay",this.onReady),d&&(a.setAttribute("playsinline",""),a.setAttribute("webkit-playsinline",""),a.setAttribute("x5-playsinline",""))}},{key:"removeListeners",value:function(a,b){a.removeEventListener("canplay",this.onReady),a.removeEventListener("play",this.onPlay),a.removeEventListener("waiting",this.onBuffer),a.removeEventListener("playing",this.onBufferEnd),a.removeEventListener("pause",this.onPause),a.removeEventListener("seeked",this.onSeek),a.removeEventListener("ended",this.onEnded),a.removeEventListener("error",this.onError),a.removeEventListener("ratechange",this.onPlayBackRateChange),a.removeEventListener("enterpictureinpicture",this.onEnablePIP),a.removeEventListener("leavepictureinpicture",this.onDisablePIP),a.removeEventListener("webkitpresentationmodechanged",this.onPresentationModeChange),this.shouldUseHLS(b)||a.removeEventListener("canplay",this.onReady)}},{key:"shouldUseAudio",value:function(a){return!a.config.forceVideo&&!a.config.attributes.poster&&(g.AUDIO_EXTENSIONS.test(a.url)||a.config.forceAudio)}},{key:"shouldUseHLS",value:function(a){return!!this.props.config.forceHLS|| !q&&(g.HLS_EXTENSIONS.test(a)||s.test(a))}},{key:"shouldUseDASH",value:function(a){return g.DASH_EXTENSIONS.test(a)||this.props.config.forceDASH}},{key:"shouldUseFLV",value:function(a){return g.FLV_EXTENSIONS.test(a)||this.props.config.forceFLV}},{key:"load",value:function(a){var b=this,c=this.props.config,d=c.hlsVersion,e=c.hlsOptions,g=c.dashVersion,h=c.flvVersion;if(this.hls&&this.hls.destroy(),this.dash&&this.dash.reset(),this.shouldUseHLS(a)&&(0,f.getSDK)("https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js".replace("VERSION",d),"Hls").then(function(c){if(b.hls=new c(e),b.hls.on(c.Events.MANIFEST_PARSED,function(){b.props.onReady()}),b.hls.on(c.Events.ERROR,function(a,d){b.props.onError(a,d,b.hls,c)}),s.test(a)){var d=a.match(s)[1];b.hls.loadSource("https://videodelivery.net/{id}/manifest/video.m3u8".replace("{id}",d))}else b.hls.loadSource(a);b.hls.attachMedia(b.player),b.props.onLoaded()}),this.shouldUseDASH(a)&&(0,f.getSDK)("https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js".replace("VERSION",g),"dashjs").then(function(c){b.dash=c.MediaPlayer().create(),b.dash.initialize(b.player,a,b.props.playing),b.dash.on("error",b.props.onError),3>parseInt(g)?b.dash.getDebug().setLogToBrowserConsole(!1):b.dash.updateSettings({debug:{logLevel:c.Debug.LOG_LEVEL_NONE}}),b.props.onLoaded()}),this.shouldUseFLV(a)&&(0,f.getSDK)("https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js".replace("VERSION",h),"flvjs").then(function(c){b.flv=c.createPlayer({type:"flv",url:a}),b.flv.attachMediaElement(b.player),b.flv.on(c.Events.ERROR,function(a,d){b.props.onError(a,d,b.flv,c)}),b.flv.load(),b.props.onLoaded()}),a instanceof Array)this.player.load();else if((0,f.isMediaStream)(a))try{this.player.srcObject=a}catch(i){this.player.src=window.URL.createObjectURL(a)}}},{key:"play",value:function(){var a=this.player.play();a&&a.catch(this.props.onError)}},{key:"pause",value:function(){this.player.pause()}},{key:"stop",value:function(){this.player.removeAttribute("src"),this.dash&&this.dash.reset()}},{key:"seekTo",value:function(a){this.player.currentTime=a}},{key:"setVolume",value:function(a){this.player.volume=a}},{key:"enablePIP",value:function(){this.player.requestPictureInPicture&&document.pictureInPictureElement!==this.player?this.player.requestPictureInPicture():(0,f.supportsWebKitPresentationMode)(this.player)&&"picture-in-picture"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("picture-in-picture")}},{key:"disablePIP",value:function(){document.exitPictureInPicture&&document.pictureInPictureElement===this.player?document.exitPictureInPicture():(0,f.supportsWebKitPresentationMode)(this.player)&&"inline"!==this.player.webkitPresentationMode&&this.player.webkitSetPresentationMode("inline")}},{key:"setPlaybackRate",value:function(a){try{this.player.playbackRate=a}catch(b){this.props.onError(b)}}},{key:"getDuration",value:function(){if(!this.player)return null;var a=this.player,b=a.duration,c=a.seekable;return b===1/0&&c.length>0?c.end(c.length-1):b}},{key:"getCurrentTime",value:function(){return this.player?this.player.currentTime:null}},{key:"getSecondsLoaded",value:function(){if(!this.player)return null;var a=this.player.buffered;if(0===a.length)return 0;var b=a.end(a.length-1),c=this.getDuration();return b>c?c:b}},{key:"getSource",value:function(a){var b=this.shouldUseHLS(a),c=this.shouldUseDASH(a),d=this.shouldUseFLV(a);return a instanceof Array||(0,f.isMediaStream)(a)||b||c||d?void 0:r.test(a)?a.replace("www.dropbox.com","dl.dropboxusercontent.com"):a}},{key:"render",value:function(){var a=this.props,b=a.url,c=a.playing,d=a.loop,f=a.controls,g=a.muted,h=a.config,j=a.width,k=a.height,l=this.shouldUseAudio(this.props);return e.default.createElement(l?"audio":"video",i({ref:this.ref,src:this.getSource(b),style:{width:"auto"===j?j:"100%",height:"auto"===k?k:"100%"},preload:"auto",autoPlay:c||void 0,controls:f,muted:g,loop:d},h.attributes),b instanceof Array&&b.map(this.renderSourceElement),h.tracks.map(this.renderTrack))}}],j(h.prototype,o),p&&j(h,p),u}(e.Component);b.default=t,n(t,"displayName","FilePlayer"),n(t,"canPlay",g.canPlay.file)}}])